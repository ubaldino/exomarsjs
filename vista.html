<!doctype html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width" />
	<!--<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">  -->
    <meta name="format-detection" content="telephone=no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <meta name="msapplication-tap-highlight" content="no" />

	<title>Exomars.js</title>

    <!--<link rel="stylesheet" type="text/css" href="/joydiv-skin-default.css" />-->
    <link rel="stylesheet" type="text/css" href="/estilos.css">
</head>
<body>
	<div id="contenedor">
	
		<!--<img src="http://192.168.5.125:8080/video" loop autoplay> </img>
		<img class="video_c" src="http://192.168.5.125:8080/video" ></img>
		-->
		<video id="video_c" class="video_c" src="/taylor.mp4" controls loop></video>

		<div id="panel_superior">
			panel superior
		</div>
			
		<input type="text" id="direction1" readonly>
		<input type="text" id="direction2" readonly>
		
		<input type="submit" class="encender" value="encender Led" />
		<input type="submit" class="apagar" value="apagar Led" />
		
			

		<div id="panel_inferior">
			<ul>
				<li>asd</li>
				<li>asd</li>
				<li>sdfds</li>
			</ul>
		</div>
		<div id='controller1' class="joydiv-controller1">
		    <div id="adelante" class="joydiv-up"></div>
		    <div class="joydiv-left"></div>
		    <div class="joydiv-right"></div>
		    <div class="joydiv-down"></div>
		    <div class="joydiv-trackpad">
		        <div class="joydiv-tracker"></div>
		    </div>
		</div>


		<div id='controller2' class="joydiv-controller2">
		    <div class="joydiv-up"></div>
		    <div class="joydiv-left"></div>
		    <div class="joydiv-right"></div>
		    <div class="joydiv-down"></div>
		    <div class="joydiv-trackpad">
		        <div class="joydiv-tracker"></div>
		    </div>
		</div>
	</div>
	
	<script src="/jquery-2.0.3.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script src="/control.js"></script>
	<script charset="UTF-8" src="/joydiv.js"></script>

    <script type="text/javascript">
        io = io.connect()
        var valor_camara = "Sin actividad";
        var valor_exomars = "Sin actividad";
	    var element1 = document.getElementById('controller1');
	    var element2 = document.getElementById('controller2');
        var joydiv1 = new JoydivModule.Joydiv( { 'element' : element1 } );
        var joydiv2 = new JoydivModule.Joydiv( { 'element' : element2 } );
       
        element1.addEventListener( 'joydiv-changed' , function( e ) {
            switch( joydiv1.getOneOf8Directions().name ){
            	case "up":
					valor_exomars = "exomars: adelante"; break;
            	case "down":
					valor_exomars = "exomars: atras"; break;
            	case "left":
					valor_exomars = "exomars: izquierda"; break;
				case "right":
					valor_exomars = "exomars: derecha"; break;
            	case "up-left":
					valor_exomars = "exomars: adelante-izquierda"; break;
            	case "up-right":
					valor_exomars = "exomars: adelante-derecha"; break;
            	case "down-left":
					valor_exomars = "exomars: atras-izquierda"; break;
            	case "down-right":
					valor_exomars = "exomars: atras-derecha"; break;
            	case "none":
					valor_exomars = "exomars: Sin movimiento"; break;
            }
            document.getElementById( 'direction1' ).value = valor_exomars;
        });

        element2.addEventListener( 'joydiv-changed' , function( e ) {
            switch( joydiv2.getOneOf8Directions().name ){
            	case "up":
            		valor_camara = "camara: arriba"; 
            		io.emit('encender', { hey: 'server' }, function(data) {
					    console.log( data.success )
					})
            		break;
            	case "down":
            		valor_camara = "camara: abajo"; 
					io.emit('apagar', { hey: 'server' } , function(data) {
					    console.log( data.success )
					})
            		break;
            	case "left":
            		valor_camara = "camara: izquierda"; break;
				case "right":
            		valor_camara = "camara: derecha"; break;
            	case "up-left":
            		valor_camara = "camara: arriba-izquierda"; break;
            	case "up-right":
            		valor_camara = "camara: arriba-derecha"; break;
            	case "down-left":
            		valor_camara = "camara: abajo-izquierda"; break;
            	case "down-right":
            		valor_camara = "camara: abajo-derecha"; break;
            	case "none":
            		valor_camara = "camara: Sin movimiento"; break;
            }
            document.getElementById( 'direction2' ).value = valor_camara;

        });
    </script>
</body>
</html>
